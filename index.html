<!DOCTYPE html>
<html lang="ar" dir="rtl" data-bs-theme="dark">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css"
    />
    <!-- SweetAlert2 CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css"
    />
    <!-- Custom CSS -->
    <style>
      .w-45 {
        width: 45% !important;
      }
    </style>

    <!-- Microsoft Clarity analytics script -->
    <script type="text/javascript">
      (function (c, l, a, r, i, t, y) {
        c[a] =
          c[a] ||
          function () {
            (c[a].q = c[a].q || []).push(arguments);
          };
        t = l.createElement(r);
        t.async = 1;
        t.src = "https://www.clarity.ms/tag/" + i;
        y = l.getElementsByTagName(r)[0];
        y.parentNode.insertBefore(t, y);
      })(window, document, "clarity", "script", "qa6jmlgjcf");
    </script>

    <title>ูุตุงุฏุฑ ุงูููุงุฆู ุงูุซุงูู ุซุงููู ุงููุตู ุงูุฏุฑุงุณู ุงูุซุงูุซ 1446ูู</title>
  </head>
  <body>
    <!-- Container -->
    <div class="container mt-5">
      <!-- Card -->
      <div class="card text-center">
        <div class="card-header">
          ูุตุงุฏุฑ ุงูููุงุฆู ุงูุซุงูู ุซุงููู ุงููุตู ุงูุฏุฑุงุณู ุงูุซุงูุซ 1446ูู (ุนููุฑูุฉ
          ุงูุซุงูููุฉ - ูุฐุง ุงููููุน ูู ุชุฌููุน ุงูุทูุงุจ ูุง ุนูุงูุฉ ูููุนูููู ุจู)
        </div>
        <div class="card-body">
          <h5 class="card-title mb-3">ุงุฎุชุฑ ุงููุงุฏุฉ</h5>
          <select class="form-select" id="subject" onchange="update()">
            <option value="0" selected disabled></option>
            <option value="table">ุฌุฏูู ุงูุงุฎุชุจุงุฑุงุช (ุงููุณุงุฑ ุงูุนุงู)</option>
            <option value="youtube">ุฌุฏูู ุงูุชุฑุงุญุงุช ูุดุฑูุญุงุช ุงูููุงูุฌ ูู ููุชููุจ</option>
            <option value="tech">ุงูุชูููุฉ ุงูุฑูููุฉ</option>
            <option value="math">ุงูุฑูุงุถูุงุช</option>
            <option value="chemistry">ุงูููููุงุก</option>
            <option value="english">ุงูุงูุฌููุฒู</option>
            <option value="biology">ุงูุฃุญูุงุก</option>
            <option value="physics">ุงูููุฒูุงุก</option>
          </select>

          <div class="my-3"></div>

        </div>
        <div class="card-footer text-body-secondary">
          <p class="mb-0"></p>
        </div>
      </div>
    </div>

    <!-- Abstract Downloder Modal -->
    <div
      class="modal fade"
      id="abstractDownloderModal"
      tabindex="-1"
      aria-labelledby="abstractDownloderModalLabel"
      style="display: none"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-m">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="abstractDownloderModalLabel">
              ุชูุฒูู ุงููุณุฑุฏ
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <p class="text-muted mb-4">
              ุงุฎุชุฑ ุงููุญุชููุงุช ุงูุชู ุชุฑูุฏ ุชุถููููุง ูู ุงููุณุฑุฏ:
            </p>

            <div class="row g-3">
              <div class="col-6">
                <div class="d-grid">
                  <input
                    type="checkbox"
                    class="btn-check"
                    id="summaryCheckbox"
                    autocomplete="off"
                  />
                  <label class="btn btn-outline-light" for="summaryCheckbox">
                    <i class="bi bi-file-text me-2"></i>
                    ุณุฑุฏ ูุชูุฎูุต ุงููุงุฏุฉ
                  </label>
                </div>
              </div>

              <div class="col-6">
                <div class="d-grid gap-2">
                  <input
                    type="checkbox"
                    class="btn-check"
                    id="questionsCheckbox"
                    autocomplete="off"
                  />
                  <label class="btn btn-outline-light" for="questionsCheckbox">
                    <i class="bi bi-question-circle me-2"></i>
                    ุงูุชุฌููุนุงุช
                  </label>

                  <div id="answersSection" style="display: none">
                    <input
                      type="checkbox"
                      class="btn-check"
                      id="answersCheckbox"
                      autocomplete="off"
                    />
                    <label
                      class="btn btn-outline-success w-100"
                      for="answersCheckbox"
                    >
                      <i class="bi bi-check-circle me-2"></i>
                      ุชุถููู ุงูุญููู
                    </label>
                  </div>
                </div>
              </div>
            </div>

            <div class="alert alert-danger mt-4" id="warningAlert">
              <strong>ุชูุจูู:</strong> ุชุฃูุฏ ูู ุงุฎุชูุงุฑ ุงููุญุชูู ูุจู ุงูุชุญููู.
              <br />
            </div>

            <div class="d-flex justify-content-end mt-4">
              <button class="btn btn-secondary me-2" data-bs-dismiss="modal">
                ุฅูุบุงุก
              </button>
              <button class="btn btn-primary" onclick="downloadSummary()">
                ุชุญููู ุงููุณุฑุฏ
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Quiz Modal -->
    <div
      class="modal fade"
      id="quizModal"
      tabindex="-1"
      aria-labelledby="quizModalLabel"
      aria-hidden="true"
      data-bs-backdrop="static"
      data-bs-keyboard="false"
    >
      <div class="modal-dialog modal-xl">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="quizModalLabel">ุงุฎุชุจุงุฑ</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <!-- Quiz Configuration -->
            <div id="quiz-config">
              <h5 class="mb-3">ุฅุนุฏุงุฏุงุช ุงูุงุฎุชุจุงุฑ</h5>
              <div class="border p-3 rounded">
                <div class="mb-3">
                  <label class="form-label"
                    >ุงุฎุชุฑ ุงูููุงุถูุน ุงูุชู ุชุฑูุฏ ุงูุงุฎุชุจุงุฑ ุจูุง:</label
                  >
                  <div class="d-flex gap-2 mb-2">
                    <input
                      type="radio"
                      class="btn-check"
                      name="topic-mode"
                      id="topic-all"
                      autocomplete="off"
                      checked
                    />
                    <label class="btn btn-outline-primary" for="topic-all"
                      >ุงููู</label
                    >
                    <input
                      type="radio"
                      class="btn-check"
                      name="topic-mode"
                      id="topic-custom"
                      autocomplete="off"
                    />
                    <label class="btn btn-outline-primary" for="topic-custom"
                      >ูุฎุตุต</label
                    >
                  </div>
                </div>
                <div
                  class="mb-3"
                  id="topic-checkboxes-container"
                  style="display: none"
                >
                  <label class="form-label">ุฎุตุต ุงูููุงุถูุน:</label>
                  <div
                    id="topic-select-container"
                    class="d-flex flex-wrap gap-2"
                  ></div>
                </div>
                <div class="mb-3">
                  <label class="form-label">ุนุฏุฏ ุงูุฃุณุฆูุฉ:</label>
                  <div
                    id="num-questions-group"
                    class="d-flex flex-wrap gap-2 mb-2"
                  >
                    <!-- ุณูุชู ุชูููุฏ ุงูุฃุฒุฑุงุฑ ููุง -->
                  </div>
                  <input
                    type="number"
                    class="form-control"
                    id="num-questions"
                    min="1"
                    style="display: none; width: 50%; direction: rtl"
                    placeholder="ุนุฏุฏ ูุฎุตุต"
                  />
                </div>
              </div>
            </div>

            <!-- Quiz Section -->
            <div id="quiz-section" style="display: none">
              <div id="quiz-progress" class="mb-3 text-center"></div>
              <div id="question-container">
                <img
                  id="question-image"
                  src=""
                  alt="Question"
                  class="img-fluid"
                  width="100%"
                />
              </div>
              <div
                id="answer-buttons"
                class="mt-3 d-flex flex-wrap gap-2 w-100 justify-content-center"
              >
                <button
                  class="btn btn-outline-light answer-btn w-45"
                  data-answer="A"
                  id="A"
                >
                  A
                </button>
                <button
                  class="btn btn-outline-light answer-btn w-45"
                  data-answer="B"
                  id="B"
                >
                  B
                </button>
                <button
                  class="btn btn-outline-light answer-btn w-45"
                  data-answer="C"
                  id="C"
                >
                  C
                </button>
                <button
                  class="btn btn-outline-light answer-btn w-45"
                  data-answer="D"
                  id="D"
                >
                  D
                </button>
              </div>
              <div id="feedback" class="mt-3 text-center"></div>
            </div>

            <!-- Result Section -->
            <div id="result-section" style="display: none" class="text-center">
              <h5 class="mb-4">ุงููุชูุฌุฉ</h5>
              <h6 id="score"></h6>
            </div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              ุฅุบูุงู
            </button>
            <button
              id="next-button"
              class="btn btn-primary"
              style="display: none"
            >
              ุงูุณุคุงู ุงูุชุงูู
            </button>
            <button id="start-quiz-button" class="btn btn-primary">
              ุงุจุฏุฃ ุงูุงุฎุชุจุงุฑ
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Words Modal-->
    <div
      class="modal fade"
      id="wordModal"
      tabindex="-1"
      aria-labelledby="wordModalLabel"
      style="display: none"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-xl">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="wordModalLabel">ูุงุฆูุฉ ุงููููุงุช</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <table class="table table-striped text-center" dir="ltr">
              <thead class="table-dark">
                <tr>
                  <th>ุงููููุฉ</th>
                  <th>ุงููุนูู</th>
                </tr>
              </thead>
              <tbody id="wordsTableBody"></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Words Quiz Modal -->
    <div
      class="modal fade"
      id="wordsQuizModal"
      data-bs-backdrop="static"
      tabindex="-1"
      aria-labelledby="wordsQuizModalLabel"
      style="display: none"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="wordsQuizModalLabel">ุงุฎุชุจุงุฑ ุงููููุงุช</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <div id="quizContainer">
              <div class="d-flex justify-content-between mb-4">
                <div>
                  <span>ุงููููุฉ: </span>
                  <span id="questionCounter" class="badge bg-primary">1</span>
                  <span> ูู </span>
                  <span id="totalQuestions" class="badge bg-secondary">0</span>
                </div>
              </div>

              <div class="card mb-4">
                <div class="card-body text-center">
                  <h3 id="currentWord" class="mb-3">ุฌุงุฑ ุงูุชุญููู...</h3>
                  <button class="btn btn-sm mb-3" onclick="speakCurrentWord()">
                    ๐
                  </button>
                  <div id="options" class="d-grid gap-2"></div>
                </div>
              </div>
            </div>

            <div id="resultsContainer" style="display: none">
              <div class="card">
                <div class="card-body text-center">
                  <h4 class="mb-4">ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ</h4>
                  <div class="results-summary">
                    <p class="mb-2">
                      <span class="fw-bold">ุนุฏุฏ ุงููููุงุช: </span
                      ><span id="finalTotalQuestions">0</span>
                    </p>
                    <p class="mb-2">
                      <span class="fw-bold">ุงูุฅุฌุงุจุงุช ุงูุตุญูุญุฉ: </span
                      ><span id="finalCorrectAnswers">0</span>
                    </p>
                    <p class="mb-2">
                      <span class="fw-bold">ุงูุฅุฌุงุจุงุช ุงูุฎุงุทุฆุฉ: </span
                      ><span id="finalWrongAnswers">0</span>
                    </p>
                    <p class="mb-2">
                      <span class="fw-bold">ุงูุฏุฑุฌุฉ ุงูููุงุฆูุฉ: </span
                      ><span id="finalScore">0</span>
                    </p>
                  </div>

                  <div class="mt-4">
                    <h5 class="mb-3">ุงููููุงุช ุงูุชู ูู ุชุชููู ูู ูุนุฑูุชูุง:</h5>
                    <ul id="wrongAnswersList" class="list-group"></ul>
                  </div>

                  <div class="mt-4">
                    <button class="btn btn-primary" onclick="restartWordQuiz()">
                      ุฅุนุงุฏุฉ ุงูุงุฎุชุจุงุฑ
                    </button>
                    <button
                      class="btn btn-secondary"
                      data-bs-dismiss="modal"
                      aria-label="Close"
                    >
                      ุฅุบูุงู
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>

  <!-- SweetAlert2 JS -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <!-- Custom JS Script -->
  <script>
    const footerText = [
      `ูุง ุชูุณููุง ูู ุฏุนุงุฆูู ูุนููู ุฃูุฑุจ ุฅูู ุงููู ููุฒูุฉ`,
      `ุงุญุฑุต ุนูู ูุง ูููุนูุ ูุงุณุชุนู ุจุงููู ููุง ุชุนุฌุฒ`,
      `ุฑุจ ุงุดุฑุญ ูู ุตุฏุฑู ููุณุฑ ูู ุฃูุฑู ูุงุญูู ุนูุฏุฉ ูู ูุณุงูู`,
      `(ููููู ุฑูุจูู ุฒูุฏูู ุนููููุง)`,
      `(ุฑูุจูู ููุจู ููู ุญูููููุง ููุฃูููุญูููููู ุจูุงูุตููุงููุญูููู)`,
      `(ูู ุฎุฑุฌ ูู ุทูุจ ุงูุนููุ ูุงู ูู ุณุจูู ุงููู ุญุชู ูุฑุฌุน)`,
      `ุณุจุญุงู ุงููู ูุจุญูุฏูุ ุณุจุญุงู ุงููู ุงูุนุธูู`,
      `ูููุง ููุบูููู ุชูุดูููุฏู ุงูููุจุงูู ุฅูุฐุง ุจูุงูุฌูููู ูููุณููู ููุฏ ููุฏููุชุง`,
      `ุฌูุนููุชู ุงููุงูู ููููู ุงูุนูููู ุฌูููุงู ููุนููุฑููู ูู ุงูููุถูููุฉู ูุงุนูุฏููุชุง`,
      `ููุฑูุฃุณู ุงูุนูููู ุชูููู ุงููููู ุญูููุงู ูููููุณู ุจูุฃูู ูููุงู ููููุฏ ุฑูุฃูุณุชุง`,
      `ุฅูุฐุง ูุง ููู ููููุฏูู ุงูุนูููู ุฎููุฑุงู ููุฎููุฑู ููููู ุฃูู ููู ููุฏ ุฌููููุชุง`,
      `(ูููููู ุงุนููููููุง ููุณูููุฑูู ุงูููููู ุนููููููููู ููุฑูุณูููููู ููุงููููุคูููููููู)`,
      `(ุฑูุจููููุง ุฃูููุฑูุบู ุนูููููููุง ุตูุจูุฑูุง ููุชููููููููุง ููุณูููููููู)`,
      `(ุฑูุจูู ุฃูููุฒูุนูููู ุฃููู ุฃูุดูููุฑู ููุนูููุชููู ุงูููุชูู ุฃูููุนูููุชู ุนูููููู)`,
      `(ุฅููููููุง ูููููููู ุงูุตููุงุจูุฑูููู ุฃูุฌูุฑูููู ุจูุบูููุฑู ุญูุณูุงุจู)`,
      `(ูููููุฐูููู ุฃูุญูุณููููุง ููู ูููฐุฐููู ุงูุฏููููููุง ุญูุณูููุฉู)`,
      `(ุฅููููููุง ููุฎูุดูู ุงูููููู ูููู ุนูุจูุงุฏููู ุงููุนูููููุงุกู)`,
    ];

    const random = Math.floor(Math.random() * footerText.length);

    const subject = document.getElementById(`subject`);
    const bodyTextDiv = document.querySelector(`.card-body > div`);
    const footerTextDiv = document.querySelector(`.card-footer > p`);

    function update() {
      bodyTextDiv.innerHTML = subjects[subject.value];
    }

    document.querySelector(`body`).onload = function () {
      footerTextDiv.innerHTML = footerText[random];
    };

    const subjects = {
      0: ``,
      table: `<table class="table"> <thead> <tr> <th scope="col">ุงูููู ูุงูุชุงุฑูุฎ</th> <th scope="col">ุงูุงุฎุชุจุงุฑ</th> <th scope="col">ูุฏุฉ ุงูุงุฎุชุจุงุฑ</th> <th scope="col">ุงููุนูู ูุงุชุจ ุงูุงุฎุชุจุงุฑ</th> </tr> </thead> <tbody> <tr> <th scope="row">ุงูุซูุงุซุงุก 1446/11/29ูู</th> <td>ุงูุชูููุฉ ุงูุฑูููุฉ</td> <td>ุณุงุนุชุงู ููุตู</td> <td>ููุงู ุงููุงููู</td> </tr> <tr> <th scope="row">ุงูุฃุญุฏ 1446/12/19ูู</th><td>ุงูุฑูุงุถูุงุช</td><td>ุณุงุนุชุงู ููุตู</td> <td>ุณุนูุฏ ุงูุณุฑูุญู</td></tr><tr><th scope="row">ุงูุฅุซููู 1446/12/20ูู</th> <td>ุงูููููุงุก</td><td>ุณุงุนุชุงู ููุตู</td> <td>ุทุงุฑู ุงูููุงูู</td></tr><tr><th scope="row">ุงูุซูุงุซุงุก 1446/12/21ูู</th><td>ุงูุฅูุฌููุฒู</td><td>ุณุงุนุชุงู ููุตู</td> <td>ุจุฏุฑ ุงููุงููู</td></tr><tr><th scope="row">ุงูุฃุฑุจุนุงุก 1446/12/22ูู</th><td>ุงูููุฒูุงุก</td><td>ุณุงุนุชุงู ููุตู</td> <td>ุถูู ุงููู ุงูุญุฑุจู</td> </tr><tr><th scope="row">ุงูุฎููุณ 1446/12/23ูู</th><td>ุงูุฃุญูุงุก</td><td>ุณุงุนุชุงู ููุตู</td> <td>ุนุจุฏุงูุฑุญูู ุงููุฑูู</td> </tr></tbody> </table>`,
      youtube: `<table class="table table-responsive table-striped-columns"> <thead> <tr> <th scope="col">ุงููุงุฏุฉ</th> <th scope="col">ุงูุฎูุงุฑ ุงูุฃูู</th> <th scope="col">ุงูุฎูุงุฑ ุงูุซุงูู</th> </tr> </thead> <tbody> <tr> <td scope="row">ุงูุฑูุงุถูุงุช</td> <td><a target="_blank" href="https://www.youtube.com/playlist?list=PLK744YNyj0pqGnF69lxYY920pfzpiPDut">ุฃุญูุฏ ุงููุฏูุฏ</a> ููููู ููุดุฑุญ ุนูู ูุฏุงูู</td> <td><a target="_blank" href="https://www.youtube.com/playlist?list=PLRrrrF5D5HiSo8hbOyEc-bjJIvv-1KZne">ุนูู ุงูุนูุจุฑู</a> ุฃุทูู ูุงุญุฏ ููู ุดุฑุญู ุตุนุจ ูุฃู ุดุฎุต ูุณุชูุงู ูู ูุชูุฏู ุฌุฏูุง (ุงุณุชุนููู ูู ููุช ุฏุงููุฑ ุงู ุชุฑุงุฌุน ุจุณ)</td> </tr> <tr> <td scope="row">ุงูููููุงุก</td> <td><a target="_blank" href="https://www.youtube.com/playlist?list=PLQUAm1qELiwCijyJA7_qP0yVynAzMIpAJ">ูุญูุฏ ุฒูุงุฏุฉ</a> ุงููุนุฑูู ูุง ูุนุฑู</td> <td><a target="_blank" href="https://www.youtube.com/playlist?list=PLc7cQyFl3z7Sf2YO-nrpvXBQBkIkYgUtu">ููุงุฑ</a> ุดุฑุญูุง ุถุนูู ุจุณ ูุฎุชุตุฑ</td> </tr> <tr> <td scope="row">ุงูุฅูุฌููุฒู</td> <td><a target="_blank" href="https://www.youtube.com/playlist?list=PLCYI2-XDHeNOnXNV1sM3YIcGd8mvpheHC">ูุงุฌุฏุฉ</a> ุฃุทูู ูุญุฏู</td> <td><a target="_blank" href="https://www.youtube.com/playlist?list=PLzVRVtLN8aqis3G-GZ9Cmp-dcIxR4Wvpk">ุงูุงุฎูุงุช BHD</a> ุฎูุงุฑ ููุจูู</td> </tr> <tr> <td scope="row">ุงูููุฒูุงุก</td> <td><a target="_blank" href="https://www.youtube.com/playlist?list=PLP2IZ7Q5_bQgwrPtKi4ZxBRhwsjjaXN6g">ูุงุถุญ</a> ูุฑู ููุชุงุฒ ููุงุถุญ ูุงูุญูู ุฃูู ูุฌูุณ ูุดุฑุญ ุชูุงุฑูู ุจุนุฏ ูุง ูุฎูุต ุดุฑุญ</td> <td><a target="_blank" href="https://www.youtube.com/playlist?list=PLQUAm1qELiwBRJqMDWcpwaDalK9tKKmRK">ูุญูุฏ ุฒูุงุฏุฉ</a> ุงูููุฒูุงุก ูู ุชุฎุตุตู ุจุณ ุดุฑุญู ูููุณ ููู ููู ุฃุฎุทุงุก ุจุณูุทู ููุง ูููุงู</td> </tr> <tr> <td scope="row">ุงูุฃุญูุงุก</td> <td colspan="2">ูุงููู ูู ุฃุนุฑู ุฃููู</td> </tr> </tbody> </table>`,
      tech: `<h5 class="mt-3">ุนุฏุฏ ุงูุฃุณุฆูุฉ:</h5><p>ุบูุฑ ูุนุฑูู</p><h5>ุงููุฐุงูุฑุฉ:</h5><p>ุงููุฐุงูุฑุฉ ูู ุงููุชุงุจ ูุงููุฑุงุฌุนุฉ ูู ุงูููู ุงูุชุงูู:</p><a class="d-block" href="https://drive.google.com/file/d/1s18jqRUb2pLmwQN-eVMNBRd2is8XyJ0D/view?usp=sharing" target="_blank">ุชุญููู ุจูู ุฃุณุฆูุฉ ุงูุชูููุฉ ุงูุฑูููุฉ 2-2 ุบูุฑ ูุญููู</a><a class="d-block" href="https://drive.google.com/file/d/1GEWUGDLD7KXqsjcS29_jlple3fewT4Dz/view?usp=drive_link" target="_blank">ุชุญููู ุจูู ุฃุณุฆูุฉ ุงูุชูููุฉ ุงูุฑูููุฉ 2-2 ูุญููู</a>`,
      math: `<h5 class="mt-3">ุนุฏุฏ ุงูุฃุณุฆูุฉ:</h5><p class="mb-1">30 ุณุคุงู ุงุฎุชูุงุฑุงุช</p><p class="mb-1">10 ุฃุณุฆูุฉ ุตุญ ูุฎุทุฃ</p><h5 class="mt-3">ุงููุฐุงูุฑุฉ:</h5><p>ุงููุฐุงูุฑุฉ ูู ุงููุชุงุจุ ูุน ุงูุนูู ุฃู ุงูุตุญ ูุงูุฎุทุฃ ุณูููู ูู ุงูุชุนุฑููุงุช ุจุงูููู ุงูุฃุตูุฑ ูุงูููุงููู ุงูุฑุฆูุณูุฉ ูู ุงููุฑุจุนุงุช ุงูุฒุฑูุงุก (ุงูุตุญ ูุงูุฎุทุฃ ููููู ูุง ููุญูุธ).</p><h5 class="mt-3">ุดุฑูุญุงุช ูุณุงุนุฏุฉ:</h5><a class="d-block" href="https://youtu.be/n9o8r9YLOqg" target="_blank">ููุฎุต ูุฑุงุฌุนุฉ ุงูุฑูุงุถูุงุช ูข-ูฃ | ุงููุญุฏุฉ ุงูุฃููู</a><a class="d-block" href="https://youtu.be/-lLi7rksL0Y" target="_blank">ููุฎุต ูุฑุงุฌุนุฉ ุงูุฑูุงุถูุงุช ูข-ูฃ | ุงููุญุฏุฉ ุงูุซุงููุฉ</a><a class="d-block" href="https://youtu.be/2Ex06sfoe6U" target="_blank">ุชุจุณูุท ุฅูุทุงู ุงูููุงู</a><a class="d-block" href="https://drive.google.com/file/d/1YU7dmR_5EkhaHiP7byO8x_byUJkFHp5f/view?usp=drive_link" target="_blank">ุชุฌููุน ุงูุชุนุฑููุงุช ุจุงูููู ุงูุฃุตูุฑ ูุงูููุงููู ุงูุฑุฆูุณูุฉ ูู ุงููุฑุจุนุงุช ุงูุฒุฑูุงุก (ุชุฌููุน ุงูุตุญ ูุงูุฎุทุฃ)</a>`,
      chemistry: `<h5 class="mt-3">ุนุฏุฏ ุงูุฃุณุฆูุฉ:</h5><p class="mb-1">ุบูุฑ ูุนุฑูู</p><h5 class="mt-3">ุงููุฐุงูุฑุฉ:</h5><p>ุงููุฐุงูุฑุฉ ูู ูุณุฑุฏ ุงูููููุงุกุ ูุดูู ูู ุงูููุงุถูุน.</p><button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#abstractDownloderModal" data-subject="chemistry23">ุชุญููู ุงููุณุฑุฏ</button> <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#quizModal" data-subject="chemistry23" data-title="ุงูููููุงุก" > ุงุจุฏุฃ ุงูุงุฎุชุจุงุฑ ุงูุฅููุชุฑููู ููุชุฌููุนุงุช </button>`,
      english: `<h5 class="mt-3">ุนุฏุฏ ุงูุฃุณุฆูุฉ:</h5><p>ุบูุฑ ูุนุฑูู</p><h5>ุงูููุงุนุฏ:</h5><p class="mb-1">ูู ุงููุชุงุจ ุงููGrammar ูุงููForm, Meaning, and Function.</p><p class="mb-1">ุงูุงุฎุชุจุงุฑ ูุณุฎ ูุตู ูู ุงูุฃูุซูุฉ ููู ุงูุชูุงุฑูู ุฃุณูู ูู ูุงุนุฏุฉ.</p><p>ูุง ููุฌุฏ ุฃู ุฃุณุฆูุฉ ูู ูุชุงุจ ุงููุดุงุท.</p><h5 class="mt-3">ุงููููุงุช:</h5><p>ูู ุงููQuick Check ูุงููReal Talk ูุงููVocabulary Building.</p><button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#wordModal">ุนุฑุถ ุงููููุงุช</button> <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#wordsQuizModal">ุงุฎุชุจุงุฑ ุงููููุงุช</button><h5 class="mt-3">ุงููุต:</h5><p>ูุต ุจุณูุท ูุน ุฃุณุฆูุฉ ุตุญ ูุฎุทุฃ ูุงุถุญุฉ ุจุฏูู ุฃู ุตุนูุจุฉ.</p><h5 class="mt-3">ุดุฑูุญุงุช ูุณุงุนุฏุฉ:</h5><a class="d-block" href="https://youtu.be/68GnVXacrLI" target="_blank">ููุฎุต ูุฑุงุฌุนุฉ ููุงุนุฏ ูููุง ููู ูข-ูฃ</a></ul>`,
      biology: `<h5 class="mt-3">ุนุฏุฏ ุงูุฃุณุฆูุฉ:</h5><p class="mb-1">20 ุณุคุงู ุงุฎุชูุงุฑุงุช</p><p class="mb-1">10 ุฃุณุฆูุฉ ุตุญ ูุฎุทุฃ</p><p class="mb-1">5 ุฃุณุฆูุฉ ูุฒุงูุฌุฉ</p><p>ุงููุฌููุน 35 ุณุคุงู</p><h5 class="mt-3">ุงููุฐุงูุฑุฉ:</h5><p>ุงููุฐุงูุฑุฉ ูู ูุณุฑุฏ ุงูุฃุญูุงุกุ ูุดูู ูู ุงูููุงุถูุน.</p><button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#abstractDownloderModal" data-subject="biology23">ุชุญููู ุงููุณุฑุฏ</button> <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#quizModal" data-subject="biology23" data-title="ุงูุฃุญูุงุก" > ุงุจุฏุฃ ุงูุงุฎุชุจุงุฑ ุงูุฅููุชุฑููู ููุชุฌููุนุงุช </button>`,
      physics: `<h5 class="mt-3">ุนุฏุฏ ุงูุฃุณุฆูุฉ:</h5><p>ุบูุฑ ูุนุฑูู</p><h5>ุงููููุงุช ุงููุณุงุนุฏุฉ:</h5><a class="d-block" href="https://drive.google.com/file/d/15SOAEsxxd3VzZqIkJ8uhCDA7Sp3o_YXh/view?usp=drivesdk" target="_blank">ุชุญููู ุชุฌููุนุงุช ุงูููุฒูุงุก 2 ุบูุฑ ูุญููู</a><a class="d-block" href="https://drive.google.com/file/d/1KuvHtT1p-mIuiUOzdXmJCQ8K8yGtldc0/view?usp=drivesdk" target="_blank">ุชุญููู ุชุฌููุนุงุช ุงูููุฒูุงุก 2  ูุญููู</a>`,
    };
  </script>

  <!-- Download Summary Script -->
  <script>
    document
      .getElementById("questionsCheckbox")
      .addEventListener("change", function () {
        const answersSection = document.getElementById("answersSection");
        answersSection.style.display = this.checked ? "block" : "none";
        if (!this.checked) {
          document.getElementById("answersCheckbox").checked = false;
        }
      });

    const abstracts = {
      biology23: {
        title: "ุงูุฃุญูุงุก",
        100: "https://drive.google.com/file/d/1onjPwfpCQrmf_UdaO1yiwoQPDI_Rx6eR/view?usp=sharing",
        110: "https://drive.google.com/file/d/1txIFykHWjSrcOKdPf7xYNigFHKuF7yCe/view?usp=sharing",
        111: "https://drive.google.com/file/d/1bqkngstkGp5IK2MMmm-GtbmNEd4MyAe5/view?usp=sharing",
        "010": "https://drive.google.com/file/d/1ILY1Am26Z3-reWoJ2mN09FL6iG-wkdqQ/view?usp=sharing",
        "011": "https://drive.google.com/file/d/1Um39S3UVc81tezSbyadyi_jvluGHF__n/view?usp=sharing",
      },
      chemistry23: {
        title: "ุงูููููุงุก",
        100: "https://drive.google.com/file/d/1r4LN8HWd3oifIzRJlVg7M_Aj9iQtt0yT/view?usp=sharing",
        110: "https://drive.google.com/file/d/1msdn4ZlbW3yQjyWKqICySr7SyMy4z6AY/view?usp=sharing",
        111: "https://drive.google.com/file/d/1ecRGUeTkUusoC58sbgL6AYCz3RFJgDZP/view?usp=sharing",
        "010": "https://drive.google.com/file/d/1QB1lC1YwnxvwNcq-xnGj4W6Ct31N5_I4/view?usp=sharing",
        "011": "https://drive.google.com/file/d/1bSxxcsR-Cr_FErZzCUzYaiysu7OR_vWm/view?usp=sharing",
      },
    };

    document
      .getElementById("abstractDownloderModal")
      .addEventListener("show.bs.modal", function (event) {
        const button = event.relatedTarget;
        const subject = button.getAttribute("data-subject");
        const modalTitle = document.getElementById(
          "abstractDownloderModalLabel"
        );
        const warningAlert = document.getElementById("warningAlert");

        modalTitle.textContent = `ุชุญููู ูุณุฑุฏ ${abstracts[subject]["title"]}`;
        warningAlert.style.display = "none";
      });

    document
      .getElementById("abstractDownloderModal")
      .addEventListener("hidden.bs.modal", function () {
        const summaryCheckbox = document.getElementById("summaryCheckbox");
        const questionsCheckbox = document.getElementById("questionsCheckbox");
        const answersCheckbox = document.getElementById("answersCheckbox");
        const answersSection = document.getElementById("answersSection");
        const modalTitle = document.getElementById(
          "abstractDownloderModalLabel"
        );
        const warningAlert = document.getElementById("warningAlert");

        summaryCheckbox.checked = false;
        questionsCheckbox.checked = false;
        answersCheckbox.checked = false;
        answersSection.style.display = "none";
        warningAlert.style.display = "none";
        modalTitle.textContent = "ุชุญููู ูุณุฑุฏ";
      });

    function downloadSummary() {
      const summaryChecked = document.getElementById("summaryCheckbox").checked;
      const questionsChecked =
        document.getElementById("questionsCheckbox").checked;
      const answersChecked = document.getElementById("answersCheckbox").checked;
      const warningAlert = document.getElementById("warningAlert");
      const code = `${summaryChecked ? "1" : "0"}${
        questionsChecked ? "1" : "0"
      }${answersChecked ? "1" : "0"}`;

      if (code === "000") {
        warningAlert.style.display = "block";
        return;
      } else {
        warningAlert.style.display = "none";
      }

      const subjectBtn = document.querySelector("[data-subject]");
      const subject = subjectBtn.dataset.subject;

      const modalTitle = document.getElementById("abstractDownloderModalLabel");
      modalTitle.textContent = `ุชุญููู ูุณุฑุฏ ${abstracts[subject]["title"]}`;

      const fileName = `${abstracts[subject][code]}`;
      const a = document.createElement("a");
      a.href = fileName;
      a.target = "_blank";
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
    }

    document
      .getElementById("questionsCheckbox")
      .addEventListener("change", function () {
        const answersSection = document.getElementById("answersSection");
        answersSection.style.display = this.checked ? "block" : "none";

        if (!this.checked) {
          document.getElementById("answersCheckbox").checked = false;
        }
      });
  </script>

  <!-- Quiz Script -->
  <script>
    // Quiz Logic
    const quizModal = document.getElementById("quizModal");
    const quizConfig = document.getElementById("quiz-config");
    const quizSection = document.getElementById("quiz-section");
    const resultSection = document.getElementById("result-section");
    const questionImage = document.getElementById("question-image");
    const answerButtons = document.getElementById("answer-buttons");
    const feedback = document.getElementById("feedback");
    const nextButton = document.getElementById("next-button");
    const scoreDisplay = document.getElementById("score");
    const numQuestionsInput = document.getElementById("num-questions");
    const topicSelect = document.getElementById("topic-select");
    const startQuizButton = document.getElementById("start-quiz-button");
    const quizTitle = document.getElementById("quiz-title");
    const quizProgress = document.getElementById("quiz-progress");

    let questions = [];
    let currentQuestionIndex = 0;
    let score = 0;
    let incorrectAnswers = [];
    let selectedSubject = "biology23";

    // ุชุญุฏูุซ ุชูููุฏ ุงูุดููุจููุณูุฒ ููููููุง ุฃุฒุฑุงุฑ btn-check
    function renderTopicCheckboxes(topics) {
      const topicSelectContainer = document.getElementById(
        "topic-select-container"
      );
      topicSelectContainer.innerHTML = "";
      topics.forEach(topic => {
        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.className = "btn-check";
        checkbox.id = `topic-${topic}`;
        checkbox.value = topic;
        checkbox.autocomplete = "off";

        const label = document.createElement("label");
        label.className = "btn btn-sm btn-outline-light";
        label.htmlFor = `topic-${topic}`;
        label.textContent = topic;

        topicSelectContainer.appendChild(checkbox);
        topicSelectContainer.appendChild(label);
      });
    }

    // ุชุญุฏูุซ loadQuestions ููุฃุฎุฐ ููุท ุงูุชูุจููุงุช ุงูุชู ุชุญุชูู ุนูู ุฃุณุฆูุฉ
    async function loadQuestions() {
      try {
        const response = await fetch(selectedSubject + "/data.json");
        const data = await response.json();
        let allQuestions = [];

        // ููุท ุงูุชูุจููุงุช ุงูุชู ุชุญุชูู ุนูู ุฃุณุฆูุฉ
        data.topics.forEach(topic => {
          if (topic.exercises_solve && topic.exercises_solve.length > 0) {
            topic.exercises_solve.forEach(ex => {
              allQuestions.push({
                topic: topic.name,
                image: `${topic.name}/exercise_${ex.id}.png`,
                correctAnswer: ex.solve || "A",
              });
            });
          }
        });

        questions = allQuestions;

        // ุชูููุฏ ุงูุดููุจููุณูุฒ ูุฃุฒุฑุงุฑ
        const topics = [...new Set(questions.map(q => q.topic))];
        renderTopicCheckboxes(topics);

        // ุชูููุฏ ุฃุฒุฑุงุฑ ุนุฏุฏ ุงูุฃุณุฆูุฉ
        renderNumQuestionsButtons(questions.length);

        // ุนูุฏ ุชุบููุฑ ุงุฎุชูุงุฑ ุงูุชูุจููุงุช ุงููุฎุตุตุฉุ ุนุฏู ุฃุฒุฑุงุฑ ุนุฏุฏ ุงูุฃุณุฆูุฉ ุชููุงุฆูุงู
        document
          .getElementById("topic-select-container")
          .addEventListener("change", updateCustomNumQuestions);
      } catch (error) {
        console.error("Error loading questions:", error);
        feedback.textContent = "Error loading questions. Please try again.";
      }
    }

    // ุฏุงูุฉ ูุชุญุฏูุซ ุฃุฒุฑุงุฑ ุนุฏุฏ ุงูุฃุณุฆูุฉ ุนูุฏ ุชุฎุตูุต ุงูุชูุจููุงุช
    function updateCustomNumQuestions() {
      if (document.getElementById("topic-custom").checked) {
        const selectedTopics = Array.from(
          document.querySelectorAll(
            '#topic-select-container input[type="checkbox"]:checked'
          )
        ).map(checkbox => checkbox.value);

        // ุงุญุณุจ ุนุฏุฏ ุงูุฃุณุฆูุฉ ุจูุงุกู ุนูู ุงูุชูุจููุงุช ุงููุฎุชุงุฑุฉ ููุท
        const filteredQuestions = questions.filter(q =>
          selectedTopics.includes(q.topic)
        );
        renderNumQuestionsButtons(filteredQuestions.length);

        // ุญุฏุซ ูููุฉ input ููููู ุฃูุตู ุญุฏ ูู ุนุฏุฏ ุงูุฃุณุฆูุฉ ุงููุชุงุญุฉ
        numQuestionsInput.max = filteredQuestions.length;
        if (parseInt(numQuestionsInput.value) > filteredQuestions.length) {
          numQuestionsInput.value = filteredQuestions.length;
        }
      }
    }

    // ุนูุฏ ุชุบููุฑ ูุถุน ุงูุชูุจูู (ูู/ูุฎุตุต) ุญุฏุซ ุฃุฒุฑุงุฑ ุนุฏุฏ ุงูุฃุณุฆูุฉ
    document
      .getElementById("topic-all")
      .addEventListener("change", function () {
        renderNumQuestionsButtons(questions.length);
        numQuestionsInput.max = questions.length;
      });
    document
      .getElementById("topic-custom")
      .addEventListener("change", function () {
        updateCustomNumQuestions();
      });

    // ุชูููุฏ ุฃุฒุฑุงุฑ ุนุฏุฏ ุงูุฃุณุฆูุฉ
    function renderNumQuestionsButtons(total) {
      const group = document.getElementById("num-questions-group");
      group.innerHTML = "";

      // ุชูููุฏ ุฎูุงุฑุงุช ุฏููุงููููุฉ: 10ุ 20ุ 30ุ 50 ุฃู ุฃูู ุฅุฐุง ูุงู ุงูุนุฏุฏ ุฃูู
      let options = [];
      if (total <= 10) {
        options = [total];
      } else if (total <= 20) {
        options = [10, total];
      } else if (total <= 30) {
        options = [10, 20, total];
      } else if (total <= 50) {
        options = [10, 20, 30, total];
      } else {
        options = [10, 20, 30, 50];
        if (total > 50) options.push(total);
      }

      // ุฅุฒุงูุฉ ุงูุชูุฑุงุฑ
      options = [...new Set(options)].filter(n => n > 0 && n <= total);

      options.forEach(num => {
        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "btn btn-outline-primary";
        btn.textContent = num === total ? `ุฌููุน ุงูุฃุณุฆูุฉ (${total})` : num;
        btn.onclick = () => {
          document.getElementById("num-questions").style.display = "none";
          document.getElementById("num-questions").value = num;
          setActiveNumBtn(btn);
        };
        group.appendChild(btn);
      });

      // ุฒุฑ ูุฎุตุต
      const customBtn = document.createElement("button");
      customBtn.type = "button";
      customBtn.className = "btn btn-outline-primary";
      customBtn.textContent = "ูุฎุตุต";
      customBtn.onclick = () => {
        document.getElementById("num-questions").style.display = "inline-block";
        document.getElementById("num-questions").value = "";
        setActiveNumBtn(customBtn);
      };
      group.appendChild(customBtn);

      // ุชูุนูู ุฃูู ุฒุฑ ุงูุชุฑุงุถููุง
      group.children[0].click();
    }

    function setActiveNumBtn(activeBtn) {
      const group = document.getElementById("num-questions-group");
      Array.from(group.children).forEach(btn =>
        btn.classList.remove("btn-primary")
      );
      activeBtn.classList.add("btn-primary");
      activeBtn.classList.remove("btn-outline-primary");
      Array.from(group.children).forEach(btn => {
        if (btn !== activeBtn) {
          btn.classList.remove("btn-primary");
          btn.classList.add("btn-outline-primary");
        }
      });
    }

    // ุงูุชุญูู ูู ุฅุธูุงุฑ ุงูุดููุจููุณูุฒ ุญุณุจ ุงุฎุชูุงุฑ ุงููู/ูุฎุตุต
    document
      .getElementById("topic-all")
      .addEventListener("change", function () {
        document.getElementById("topic-checkboxes-container").style.display =
          "none";
      });
    document
      .getElementById("topic-custom")
      .addEventListener("change", function () {
        document.getElementById("topic-checkboxes-container").style.display =
          "block";
      });

    // ุชุญุฏูุซ startQuiz ููุฃุฎุฐ ุงูููุงุถูุน ุญุณุจ ุงูุงุฎุชูุงุฑ
    function startQuiz() {
      let filteredQuestions;
      if (document.getElementById("topic-all").checked) {
        filteredQuestions = questions;
      } else {
        const selectedTopics = Array.from(
          document.querySelectorAll(
            '#topic-select-container input[type="checkbox"]:checked'
          )
        ).map(checkbox => checkbox.value);
        filteredQuestions =
          selectedTopics.length > 0
            ? questions.filter(question =>
                selectedTopics.includes(question.topic)
              )
            : questions;
      }

      // ุฎูุท ุงูุฃุณุฆูุฉ
      filteredQuestions = [...filteredQuestions];
      shuffleArray(filteredQuestions);

      // ุชุญุฏูุฏ ุงูุนุฏุฏ ุงููุทููุจ ููุท
      let num = parseInt(numQuestionsInput.value) || filteredQuestions.length;
      filteredQuestions = filteredQuestions.slice(0, num);

      quizConfig.style.display = "none";
      quizSection.style.display = "block";
      resultSection.style.display = "none";
      currentQuestionIndex = 0;
      score = 0;
      incorrectAnswers = [];
      currentQuestions = filteredQuestions; // ูุชุบูุฑ ุฌุฏูุฏ ูููุฑุงุฌุนุฉ
      showQuestion();
    }

    loadQuestions();

    // Function to start the quiz
    function startQuiz() {
      let filteredQuestions;
      if (document.getElementById("topic-all").checked) {
        filteredQuestions = questions;
      } else {
        const selectedTopics = Array.from(
          document.querySelectorAll(
            '#topic-select-container input[type="checkbox"]:checked'
          )
        ).map(checkbox => checkbox.value);
        filteredQuestions =
          selectedTopics.length > 0
            ? questions.filter(question =>
                selectedTopics.includes(question.topic)
              )
            : questions;
      }

      // ุฎูุท ุงูุฃุณุฆูุฉ
      filteredQuestions = [...filteredQuestions];
      shuffleArray(filteredQuestions);

      // ุชุญุฏูุฏ ุงูุนุฏุฏ ุงููุทููุจ ููุท
      let num = parseInt(numQuestionsInput.value) || filteredQuestions.length;
      filteredQuestions = filteredQuestions.slice(0, num);

      quizConfig.style.display = "none";
      quizSection.style.display = "block";
      resultSection.style.display = "none";
      currentQuestionIndex = 0;
      score = 0;
      incorrectAnswers = [];
      currentQuestions = filteredQuestions;
      userAnswers = new Array(filteredQuestions.length).fill(null);
      showQuestion();
      startQuizAutoSave();
    }

    // Function to show a question
    function showQuestion() {
      for (let i = 0; i < answerButtons.children.length; i++) {
        answerButtons.children[i].classList.remove("btn-success", "btn-danger");
        answerButtons.children[i].classList.add("btn-outline-light");
        answerButtons.children[i].disabled = false;
      }

      // ุชุญุฏูุซ ุงูุนุฏุงุฏ ูุงูุฏุฑุฌุฉ
      quizProgress.innerHTML = `ุงูุณุคุงู <b>${
        currentQuestionIndex + 1
      }</b> ูู <b>${currentQuestions.length}</b> | ุงูุฏุฑุฌุฉ: <b>${score}</b>`;

      if (currentQuestionIndex >= currentQuestions.length) {
        endQuiz();
        return;
      }

      const question = currentQuestions[currentQuestionIndex];
      questionImage.src = `${selectedSubject}/${question.image}`;
      feedback.classList.remove("alert", "alert-success", "alert-danger");
      feedback.textContent = "";
      nextButton.style.display = "none";

      // Remove previous event listeners
      answerButtons.querySelectorAll(".answer-btn").forEach(btn => {
        btn.removeEventListener("click", checkAnswer);
      });

      // Add event listeners to answer buttons
      answerButtons.querySelectorAll(".answer-btn").forEach(btn => {
        btn.addEventListener("click", checkAnswer);
      });
    }

    // Function to check the answer
    function checkAnswer(event) {
      const selectedAnswer = event.target.dataset.answer;
      const question = currentQuestions[currentQuestionIndex];

      userAnswers[currentQuestionIndex] = selectedAnswer;

      if (selectedAnswer === question.correctAnswer) {
        score++;
        feedback.classList.add("alert", "alert-success");
        feedback.textContent = "ุฅุฌุงุจุฉ ุตุญูุญุฉ!";
        document.getElementById(selectedAnswer).classList.add("btn-success");
        document
          .getElementById(selectedAnswer)
          .classList.remove("btn-outline-light");
      } else {
        feedback.classList.add("alert", "alert-danger");
        feedback.textContent = `ุฅุฌุงุจุฉ ุฎุงุทุฆุฉ. ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ ูู: ${question.correctAnswer}`;
        document.getElementById(selectedAnswer).classList.add("btn-danger");
        document
          .getElementById(selectedAnswer)
          .classList.remove("btn-outline-light");
        document
          .getElementById(question.correctAnswer)
          .classList.add("btn-success");
        document
          .getElementById(question.correctAnswer)
          .classList.remove("btn-outline-light");
        incorrectAnswers.push(question);
      }

      nextButton.style.display = "block";

      // Disable answer buttons
      answerButtons.querySelectorAll(".answer-btn").forEach(btn => {
        btn.disabled = true;
      });

      // ุชุญุฏูุซ ุงูุนุฏุงุฏ ูุงูุฏุฑุฌุฉ ุจุนุฏ ุงูุฅุฌุงุจุฉ
      quizProgress.innerHTML = `ุงูุณุคุงู <b>${
        currentQuestionIndex + 1
      }</b> ูู <b>${currentQuestions.length}</b> | ุงูุฏุฑุฌุฉ: <b>${score}</b>`;

      saveQuizState();
    }

    // Function to go to the next question
    function nextQuestion() {
      currentQuestionIndex++;
      showQuestion();
      saveQuizState();
    }

    // Event listeners
    startQuizButton.addEventListener("click", startQuiz);
    nextButton.addEventListener("click", nextQuestion);

    // ุฏุงูุฉ ุฎูุท ูุตูููุฉ
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    // ุชุญุฏูุซ startQuiz ููุฎูุท ุงูุฃุณุฆูุฉ ููุถุจุท ุงูุนุฏุฏ ุงูุตุญูุญ
    function startQuiz() {
      let filteredQuestions;
      if (document.getElementById("topic-all").checked) {
        filteredQuestions = questions;
      } else {
        const selectedTopics = Array.from(
          document.querySelectorAll(
            '#topic-select-container input[type="checkbox"]:checked'
          )
        ).map(checkbox => checkbox.value);
        filteredQuestions =
          selectedTopics.length > 0
            ? questions.filter(question =>
                selectedTopics.includes(question.topic)
              )
            : questions;
      }

      // ุฎูุท ุงูุฃุณุฆูุฉ
      filteredQuestions = [...filteredQuestions];
      shuffleArray(filteredQuestions);

      // ุชุญุฏูุฏ ุงูุนุฏุฏ ุงููุทููุจ ููุท
      let num = parseInt(numQuestionsInput.value) || filteredQuestions.length;
      filteredQuestions = filteredQuestions.slice(0, num);

      quizConfig.style.display = "none";
      quizSection.style.display = "block";
      resultSection.style.display = "none";
      currentQuestionIndex = 0;
      score = 0;
      incorrectAnswers = [];
      currentQuestions = filteredQuestions; // ูุชุบูุฑ ุฌุฏูุฏ ูููุฑุงุฌุนุฉ
      userAnswers = new Array(filteredQuestions.length).fill(null);
      showQuestion();
      startQuizAutoSave();
    }

    // ูุชุบูุฑ ุฌุฏูุฏ ููุงุญุชูุงุธ ุจุงูุฃุณุฆูุฉ ุงูุญุงููุฉ ูููุฑุงุฌุนุฉ
    let currentQuestions = [];

    // ุชุญุฏูุซ showQuestion ููุณุชุฎุฏู currentQuestions
    function showQuestion() {
      for (let i = 0; i < answerButtons.children.length; i++) {
        answerButtons.children[i].classList.remove("btn-success", "btn-danger");
        answerButtons.children[i].classList.add("btn-outline-light");
        answerButtons.children[i].disabled = false;
      }

      // ุชุญุฏูุซ ุงูุนุฏุงุฏ ูุงูุฏุฑุฌุฉ
      quizProgress.innerHTML = `ุงูุณุคุงู <b>${
        currentQuestionIndex + 1
      }</b> ูู <b>${currentQuestions.length}</b> | ุงูุฏุฑุฌุฉ: <b>${score}</b>`;

      if (currentQuestionIndex >= currentQuestions.length) {
        endQuiz();
        return;
      }

      const question = currentQuestions[currentQuestionIndex];
      questionImage.src = `${selectedSubject}/${question.image}`;
      feedback.classList.remove("alert", "alert-success", "alert-danger");
      feedback.textContent = "";
      nextButton.style.display = "none";

      // Remove previous event listeners
      answerButtons.querySelectorAll(".answer-btn").forEach(btn => {
        btn.removeEventListener("click", checkAnswer);
      });

      // Add event listeners to answer buttons
      answerButtons.querySelectorAll(".answer-btn").forEach(btn => {
        btn.addEventListener("click", checkAnswer);
      });
    }

    // ุชุญุฏูุซ checkAnswer ููุณุชุฎุฏู currentQuestions
    function checkAnswer(event) {
      const selectedAnswer = event.target.dataset.answer;
      const question = currentQuestions[currentQuestionIndex];

      userAnswers[currentQuestionIndex] = selectedAnswer;

      if (selectedAnswer === question.correctAnswer) {
        score++;
        feedback.classList.add("alert", "alert-success");
        feedback.textContent = "ุฅุฌุงุจุฉ ุตุญูุญุฉ!";
        document.getElementById(selectedAnswer).classList.add("btn-success");
        document
          .getElementById(selectedAnswer)
          .classList.remove("btn-outline-light");
      } else {
        feedback.classList.add("alert", "alert-danger");
        feedback.textContent = `ุฅุฌุงุจุฉ ุฎุงุทุฆุฉ. ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ ูู: ${question.correctAnswer}`;
        document.getElementById(selectedAnswer).classList.add("btn-danger");
        document
          .getElementById(selectedAnswer)
          .classList.remove("btn-outline-light");
        document
          .getElementById(question.correctAnswer)
          .classList.add("btn-success");
        document
          .getElementById(question.correctAnswer)
          .classList.remove("btn-outline-light");
        incorrectAnswers.push(question);
      }

      nextButton.style.display = "block";

      // Disable answer buttons
      answerButtons.querySelectorAll(".answer-btn").forEach(btn => {
        btn.disabled = true;
      });

      // ุชุญุฏูุซ ุงูุนุฏุงุฏ ูุงูุฏุฑุฌุฉ ุจุนุฏ ุงูุฅุฌุงุจุฉ
      quizProgress.innerHTML = `ุงูุณุคุงู <b>${
        currentQuestionIndex + 1
      }</b> ูู <b>${currentQuestions.length}</b> | ุงูุฏุฑุฌุฉ: <b>${score}</b>`;

      saveQuizState();
    }

    // ุชุญุฏูุซ endQuiz ููุณุชุฎุฏู currentQuestions
    function endQuiz() {
      nextButton.style.display = "none";
      quizSection.style.display = "none";
      resultSection.style.display = "block";
      scoreDisplay.innerHTML = `<b>ุงููุชูุฌุฉ: ${score} / ${currentQuestions.length}</b><br><div class="text-success mt-3">ุงูุชูู ุงูุงุฎุชุจุงุฑ</div>`;
      clearQuizState(selectedSubject);
      stopQuizAutoSave();
    }

    // ุชุญุฏูุซ nextQuestion ููุณุชุฎุฏู currentQuestions
    function nextQuestion() {
      currentQuestionIndex++;
      showQuestion();
      saveQuizState();
    }

    // ุฅุตูุงุญ ุฒุฑ ุงุจุฏุฃ ุงูุงุฎุชุจุงุฑ (ูุฌุจ ุฃู ูุณุชุฏุนู ุฏุงูุฉ startQuiz ููุท)
    startQuizButton.onclick = function () {
      startQuizButton.style.display = "none";
      startQuiz();
    };

    // ุฅุตูุงุญ ุฅุนุงุฏุฉ ุชุนููู ูู ุดูุก ุนูุฏ ูุชุญ ุงูููุฏุงู
    quizModal.addEventListener("show.bs.modal", async function (event) {
      // ุฌูุจ ุงุณู ุงููุงุฏุฉ ูุงุณู ุงูููู ูู ุงูุฒุฑ
      let btn = event.relatedTarget;
      if (!btn) {
        // ุฅุฐุง ูู ููุฌุฏ ุฒุฑ (ูุซูุงู ุฅุนุงุฏุฉ ูุชุญ)ุ ุงุณุชุฎุฏู ุงูุงูุชุฑุงุถู
        btn = document.querySelector('[data-bs-target="#quizModal"]');
      }
      const subjectFile = btn.getAttribute("data-subject") || "biology23";
      const subjectTitle = btn.getAttribute("data-title") || "ุงูุฃุญูุงุก";
      selectedSubject = subjectFile;

      document.getElementById(
        "quizModalLabel"
      ).textContent = `ุงุฎุชุจุงุฑ ${subjectTitle}`;

      // ุชุญูู ูู ูุฌูุฏ ุงุฎุชุจุงุฑ ูุญููุธ
      const saved = loadQuizState(subjectFile);
      if (
        saved &&
        saved.currentQuestions &&
        saved.currentQuestions.length > 0
      ) {
        const result = await Swal.fire({
          title: `ููุฌุฏ ุงุฎุชุจุงุฑ ุบูุฑ ููุชูู ููุงุฏุฉ ${subjectTitle}`,
          text: "ูู ุชุฑูุฏ ุฅููุงู ุงูุงุฎุชุจุงุฑ ุงูุณุงุจูุ",
          icon: "question",
          showCancelButton: true,
          confirmButtonText: "ูุนูุ ุฃููู",
          cancelButtonText: "ูุงุ ุงุจุฏุฃ ุฌุฏูุฏ",
        });
        if (result.isConfirmed) {
          // ุงุณุชุฑุฌุน ุงูุญุงูุฉ ุจุงููุงูู
          quizConfig.style.display = "none";
          quizSection.style.display = "block";
          resultSection.style.display = "none";
          currentQuestionIndex = saved.currentQuestionIndex;
          score = saved.score;
          incorrectAnswers = saved.incorrectAnswers || [];
          currentQuestions = saved.currentQuestions;
          userAnswers =
            saved.userAnswers ||
            new Array(saved.currentQuestions.length).fill(null);

          // ุงุณุชุฑุฌุงุน ุฅุนุฏุงุฏุงุช ุงูุชุตููุฉ
          if (saved.topicMode === "all") {
            document.getElementById("topic-all").checked = true;
            document.getElementById(
              "topic-checkboxes-container"
            ).style.display = "none";
          } else {
            document.getElementById("topic-custom").checked = true;
            document.getElementById(
              "topic-checkboxes-container"
            ).style.display = "block";
            document
              .querySelectorAll(
                '#topic-select-container input[type="checkbox"]'
              )
              .forEach(cb => {
                cb.checked = saved.selectedTopics.includes(cb.value);
              });
          }
          numQuestionsInput.value =
            saved.numQuestions || saved.currentQuestions.length;

          showQuestion();
          startQuizAutoSave();
          startQuizButton.style.display = "none";
          return;
        } else {
          // ุญุฐู ุงูุญุงูุฉ ุงููุฏููุฉ ูุจุฏุก ุฌุฏูุฏ
          clearQuizState(subjectFile);
        }
      }

      // ...ุจุงูู ููุฏ ุฅุนุงุฏุฉ ุงูุชุนููู ููุง ูู...

      quizConfig.style.display = "block";
      quizSection.style.display = "none";
      resultSection.style.display = "none";
      currentQuestionIndex = 0;
      score = 0;
      incorrectAnswers = [];
      currentQuestions = [];
      userAnswers = [];
      document.getElementById("topic-all").checked = true;
      document.getElementById("topic-checkboxes-container").style.display =
        "none";
      loadQuestions();
      renderNumQuestionsButtons(questions.length);
      numQuestionsInput.value = "";
      numQuestionsInput.style.display = "none";
      document
        .querySelectorAll('#topic-select-container input[type="checkbox"]')
        .forEach(cb => (cb.checked = false));
      startQuizButton.style.display = "block";
      stopQuizAutoSave();
    });

    // ุนูุฏ ุฅุบูุงู ุงูููุฏุงู ุฃููู ุงูุญูุธ ุงูุฏูุฑู
    quizModal.addEventListener("hidden.bs.modal", function () {
      stopQuizAutoSave();
      // ...ุจุงูู ููุฏ ุฅุนุงุฏุฉ ุงูุชุนููู ููุง ูู...
      quizConfig.style.display = "block";
      quizSection.style.display = "none";
      resultSection.style.display = "none";
      currentQuestionIndex = 0;
      score = 0;
      incorrectAnswers = [];
      currentQuestions = [];
      // ุฅุนุงุฏุฉ ุชุนููู ุงุฎุชูุงุฑ ุงูููุงุถูุน ูุนุฏุฏ ุงูุฃุณุฆูุฉ
      document.getElementById("topic-all").checked = true;
      document.getElementById("topic-checkboxes-container").style.display =
        "none";
      renderNumQuestionsButtons(questions.length);
      numQuestionsInput.value = "";
      numQuestionsInput.style.display = "none";
      // ุฅุนุงุฏุฉ ุชุนููู ุงูุดููุจููุณูุฒ
      document
        .querySelectorAll('#topic-select-container input[type="checkbox"]')
        .forEach(cb => (cb.checked = false));
      // ุฅุนุงุฏุฉ ุชุนููู ุฃุฒุฑุงุฑ ุงูุฅุฌุงุจุฉ
      answerButtons.querySelectorAll(".answer-btn").forEach(btn => {
        btn.classList.remove("btn-success", "btn-danger");
        btn.classList.add("btn-outline-light");
        btn.disabled = false;
      });
      // ุฅุนุงุฏุฉ ุชุนููู ุงูุนุฏุงุฏ ูุงูุฏุฑุฌุฉ
      quizProgress.innerHTML = `ุงูุณุคุงู <b>0</b> ูู <b>0</b> | ุงูุฏุฑุฌุฉ: <b>0</b>`;
      scoreDisplay.innerHTML = `<b>ุงููุชูุฌุฉ: 0 / 0</b><br><div class="text-success mt-3">ุงูุชูู ุงูุงุฎุชุจุงุฑ</div>`;
      feedback.classList.remove("alert", "alert-success", "alert-danger");
      feedback.textContent = "";
      nextButton.style.display = "none";
      questionImage.src = "";
      // ุฅุนุงุฏุฉ ุชุนููู ุฒุฑ ุงุจุฏุฃ ุงูุงุฎุชุจุงุฑ
      startQuizButton.style.display = "block";
    });

    // ุฏุงูุฉ ูุญูุธ ูู ุจูุงูุงุช ุงูุงุฎุชุจุงุฑ ูู localStorage ุจุดูู ุฏูุฑู
    function saveQuizState() {
      if (!currentQuestions || currentQuestions.length === 0) return;
      // ุญูุธ ูู ุดูุก: ุงูุฃุณุฆูุฉุ ุฑูู ุงูุณุคุงู ุงูุญุงููุ ุงูุฏุฑุฌุฉุ ุงูุฅุฌุงุจุงุชุ ุงูุฃุณุฆูุฉ ุงูุฎุงุทุฆุฉุ ุฅุนุฏุงุฏุงุช ุงูุชุตููุฉ
      const state = {
        currentQuestionIndex,
        score,
        incorrectAnswers,
        currentQuestions,
        selectedSubject,
        userAnswers: userAnswers,
        topicMode: document.getElementById("topic-all").checked
          ? "all"
          : "custom",
        selectedTopics: Array.from(
          document.querySelectorAll(
            '#topic-select-container input[type="checkbox"]:checked'
          )
        ).map(cb => cb.value),
        numQuestions: numQuestionsInput.value,
        timestamp: Date.now(),
      };
      localStorage.setItem(
        "quizState_" + selectedSubject,
        JSON.stringify(state)
      );
    }

    // ุฏุงูุฉ ูุงุณุชุฑุฌุงุน ุจูุงูุงุช ุงูุงุฎุชุจุงุฑ ูู localStorage
    function loadQuizState(subject) {
      const data = localStorage.getItem("quizState_" + subject);
      if (!data) return null;
      try {
        return JSON.parse(data);
      } catch {
        return null;
      }
    }

    // ุฏุงูุฉ ูุญุฐู ุจูุงูุงุช ุงูุงุฎุชุจุงุฑ ูู localStorage
    function clearQuizState(subject) {
      localStorage.removeItem("quizState_" + subject);
    }

    // ูุชุบูุฑ ูุชุฎุฒูู ุฅุฌุงุจุงุช ุงููุณุชุฎุฏู
    let userAnswers = [];

    // ุญูุธ ุงูุจูุงูุงุช ูู 3 ุซูุงูู ุฃุซูุงุก ุงูุงุฎุชุจุงุฑ
    let quizSaveInterval = null;
    function startQuizAutoSave() {
      if (quizSaveInterval) clearInterval(quizSaveInterval);
      quizSaveInterval = setInterval(saveQuizState, 3000);
    }
    function stopQuizAutoSave() {
      if (quizSaveInterval) clearInterval(quizSaveInterval);
      quizSaveInterval = null;
    }
  </script>

  <!-- Words Script -->
  <script>
    const englishWords = {
      // Exercise 1 - Fill in the blanks
      Bilingual: "someone who can speak both Arabic and English",
      Astonished: "someone who is amazed at something",
      Remarkable: "something that is incredible",
      Puzzled: "someone who is confused by something",
      Irritated: "someone who is annoyed at something",
      Fascinated: "someone who is very interested in something",

      // Phrases set 1
      "To tell you the truth": "to tell you exactly how I feel",
      "Getting to": "annoying or bothering",
      "Cheer you up": "make you feel happier",
      Killer: "great, amazing",
      "Blow me away": "really impress me",

      // Exercise 2 - Medical vocabulary matching
      Cardiovascular: "involving the heart and blood vessels",
      Equivalent: "equal",
      Hearty: "strong and with feeling",
      Antibodies: "substance produced by the body to fight germs and infection",
      Pediatric: "related to the medical care of children",
      Stimulate: "to increase energy or activity",
      Enhance: "to improve",
      Prompt: "to cause someone to do something",
      Genuine: "real, not false",

      // Exercise 3 - Food vocabulary (definitions provided)
      Delicacy: "an expensive and/or hard to find food",
      Toxins: "poisons",
      Licensed: "having legal permission to do something",
      Maintain: "to keep something in good shape",
      Peak: "the highest point",
      Aroma: "fragrant smell",
      Distinguish: "to be able to identify one from another",

      // Phrases set 2
      Spread: "an abundant meal laid out on a table",
      "Whipped it up": "made it quickly and easily",
      "In no time": "very quickly",
      "Quite the": "a very good (something)",
      "Come to think of it": "something has just occurred to me",
      "Have a sweet tooth": "love desserts and candy",

      // Exercise 4 - General vocabulary matching
      Existence: "the presence of something in reality",
      Staple: "a common or important item",
      Vendor: "someone who sells something",
      Quandary: "a situation in which someone doesn't know what to do",
      Indulgence:
        "something you let yourself have even though it may be bad for you",
      Substitute: "something that is used in place of another thing",
      Delectable: "delicious",

      // Exercise 5 - Personal vocabulary matching
      Residence: "place where someone lives",
      Bond: "connection between two living things",
      Duration: "length of time",
      Abstract: "relating to ideas or feelings",
      Pampered: "indulged",
      Adapted: "adjusted to something new",

      // Phrases set 3
      "Hang in there": "don't give up!",
      "24/7": "all day and night, non-stop (24 hours a day/7 days a week)",
      "Get to the point": "be direct",
      "Calling the shots": "in charge and making the decisions",
      "Back to the drawing board":
        "to have to start a process over again from the beginning",

      // Exercise 6 - Psychology vocabulary matching
      Consciousness: "the state of being awake",
      Alert: "aware",
      Disturbed: "worried",
      Deliberately: "on purpose",
      Speculates: "guesses about",
      Domesticated: "tamed",
      Aggressive: "unfriendly, hostile",
      Compassion: "sympathy and concern",

      // Exercise 7 - Fill in the blanks with context
      Responsible: "who is responsible for cleaning up this mess?",
      Vanish:
        "my mother's cookies always vanish moments after she takes them out of the oven",
      Motivate:
        "the beautiful weather helped motivate me to go outside and get some exercise",
      Morally: "people should feel that it's morally wrong to buy stolen goods",
      Dread: "I dread taking final exams next week",
      Tempted:
        "I was tempted to watch the film on TV, but I made myself study instead",

      // Phrases set 4
      Rotten: "bad",
      "I wouldn't put it past him": "I believe he would do that",
      "Blow the whistle on": "to reveal and put a stop to wrongdoing",
      Call: "decision",

      // Exercise 8 - Medical/genetic vocabulary matching
      Genetic:
        "related to the part of a cell that contains your parents' characteristics",
      Treatable: "capable of being cured",
      Diagnosis: "identification of the cause of a problem",
      Undergo: "experience",
      Inherited: "received from a parent or ancestor",
      Preventative: "done in order to avoid",
      Controversial: "causing disagreement",
      Potential: "the possibility of being or doing something",
    };

    const wordsTranslation = {
      // Exercise 1 - Fill in the blanks
      Bilingual: "ุซูุงุฆู ุงููุบุฉ",
      "someone who can speak both Arabic and English":
        "ุดุฎุต ูุณุชุทูุน ุงูุชุญุฏุซ ุจุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ",

      Astonished: "ููุฏูุดุ ูุฐููู",
      "someone who is amazed at something": "ุดุฎุต ูุนุฌุจ ุฃู ููุฏูุด ูู ุดูุก ูุง",

      Remarkable: "ุฑุงุฆุนุ ูููุฒุ ุฌุฏูุฑ ุจุงูููุงุญุธุฉ",
      "something that is incredible": "ุดูุก ูุง ูุตุฏู ุฃู ูุฐูู",

      Puzzled: "ูุญุชุงุฑุ ูุฑุชุจู",
      "someone who is confused by something": "ุดุฎุต ูุญุชุงุฑ ุฃู ูุฑุชุจู ูู ุดูุก ูุง",

      Irritated: "ููุฒุนุฌุ ูุชุถุงูู",
      "someone who is annoyed at something": "ุดุฎุต ููุฒุนุฌ ุฃู ูุชุถุงูู ูู ุดูุก ูุง",

      Fascinated: "ููุชููุ ุดุฏูุฏ ุงูุงูุชูุงู",
      "someone who is very interested in something":
        "ุดุฎุต ููุชู ุฌุฏุงู ุฃู ููุชูู ุจุดูุก ูุง",

      // Phrases set 1
      "To tell you the truth": "ูุฃููู ุตุงุฏูุงู ูุนู",
      "to tell you exactly how I feel": "ูุฃุฎุจุฑู ุจุงูุถุจุท ููู ุฃุดุนุฑ",

      "Getting to": "ูุฒุนุฌุ ูุถุงูู",
      "annoying or bothering": "ุฅุฒุนุงุฌ ุฃู ูุถุงููุฉ",

      "Cheer you up": "ูุฑูุน ูุนูููุงุชู",
      "make you feel happier": "ูุฌุนูู ุชุดุนุฑ ุจุณุนุงุฏุฉ ุฃูุจุฑ",

      Killer: "ุฑุงุฆุนุ ูุฐูู",
      "great, amazing": "ุนุธููุ ูุฐูู",

      "Blow me away": "ูุจูุฑููุ ูุฐูููู",
      "really impress me": "ูุนุฌุจูู ุญูุงู ุฃู ูุจูุฑูู",

      // Exercise 2 - Medical vocabulary matching
      Cardiovascular: "ููุจู ูุนุงุฆู",
      "involving the heart and blood vessels": "ูุชุนูู ุจุงูููุจ ูุงูุฃูุนูุฉ ุงูุฏูููุฉ",

      Equivalent: "ููุงูุฆุ ูุนุงุฏู",
      equal: "ูุชุณุงูู",

      Hearty: "ุญุงุฑุ ุจุญูุงุณ",
      "strong and with feeling": "ููู ููููุก ุจุงููุดุงุนุฑ",

      Antibodies: "ุฃุฌุณุงู ูุถุงุฏุฉ",
      "substance produced by the body to fight germs and infection":
        "ูุงุฏุฉ ููุชุฌูุง ุงูุฌุณู ููุญุงุฑุจุฉ ุงูุฌุฑุงุซูู ูุงูุนุฏูู",

      Pediatric: "ุทุจ ุงูุฃุทูุงู",
      "related to the medical care of children":
        "ูุชุนูู ุจุงูุฑุนุงูุฉ ุงูุทุจูุฉ ููุฃุทูุงู",

      Stimulate: "ูุญูุฒุ ูููุดุท",
      "to increase energy or activity": "ูุฒูุงุฏุฉ ุงูุทุงูุฉ ุฃู ุงููุดุงุท",

      Enhance: "ููุญุณูุ ููุนุฒุฒ",
      "to improve": "ูุชุญุณูู ุดูุก ูุง",

      Prompt: "ูุญุซุ ูุฏูุน",
      "to cause someone to do something": "ูุฌุนู ุดุฎุต ููุนู ุดูุฆุงู ูุง",

      Genuine: "ุญููููุ ุฃุตูู",
      "real, not false": "ุญููููุ ููุณ ูุฒููุงู",

      // Exercise 3 - Food vocabulary
      Delicacy: "ุทุนุงู ุดููุ ุฃููุฉ ูููุฒุฉ",
      "an expensive and/or hard to find food": "ุทุนุงู ุบุงูู ู/ุฃู ุตุนุจ ุงูุญุตูู ุนููู",

      Toxins: "ุณููู",
      poisons: "ุณููู",

      Licensed: "ููุฑุฎุต",
      "having legal permission to do something": "ูุฏูู ุฅุฐู ูุงูููู ููุนู ุดูุก ูุง",

      Maintain: "ูุญุงูุธ ุนูู",
      "to keep something in good shape": "ูููุญุงูุธุฉ ุนูู ุดูุก ูู ุญุงูุฉ ุฌูุฏุฉ",

      Peak: "ููุฉุ ุฃุนูู ููุทุฉ",
      "the highest point": "ุฃุนูู ููุทุฉ",

      Aroma: "ุฑุงุฆุญุฉ ุนุทุฑุฉ",
      "fragrant smell": "ุฑุงุฆุญุฉ ุนุทุฑุฉ",

      Distinguish: "ูููุฒ",
      "to be able to identify one from another": "ุงููุฏุฑุฉ ุนูู ุชูููุฒ ุดูุก ุนู ุขุฎุฑ",

      // Phrases set 2
      Spread: "ูุฃุฏุจุฉุ ููููุฉ",
      "an abundant meal laid out on a table": "ูุฌุจุฉ ูููุฑุฉ ููุถูุนุฉ ุนูู ุงููุงุฆุฏุฉ",

      "Whipped it up": "ุญุถุฑุชู ุจุณุฑุนุฉ",
      "made it quickly and easily": "ุตูุนู ุจุณุฑุนุฉ ูุณูููุฉ",

      "In no time": "ูู ููุญ ุงูุจุตุฑ",
      "very quickly": "ุจุณุฑุนุฉ ูุจูุฑุฉ",

      "Quite the": "ุฑุงุฆุน ุฌุฏุงู",
      "a very good (something)": "(ุดูุก) ุฌูุฏ ุฌุฏุงู",

      "Come to think of it": "ูุงูุขู ุฃุชุฐูุฑ",
      "something has just occurred to me": "ุดูุก ุฎุทุฑ ุจุจุงูู ููุชู",

      "Have a sweet tooth": "ูุญุจ ููุญูููุงุช",
      "love desserts and candy": "ูุญุจ ุงูุญูููุงุช ูุงูุณูุงูุฑ",

      // Exercise 4 - General vocabulary matching
      Existence: "ูุฌูุฏ",
      "the presence of something in reality": "ูุฌูุฏ ุดูุก ูู ุงููุงูุน",

      Staple: "ุฃุณุงุณูุ ุนูุตุฑ ููู",
      "a common or important item": "ุนูุตุฑ ุดุงุฆุน ุฃู ููู",

      Vendor: "ุจุงุฆุน",
      "someone who sells something": "ุดุฎุต ูุจูุน ุดูุฆุงู ูุง",

      Quandary: "ุญูุฑุฉุ ูุนุถูุฉ",
      "a situation in which someone doesn't know what to do":
        "ูููู ูุง ูุนุฑู ููู ุงูุดุฎุต ูุงุฐุง ููุนู",

      Indulgence: "ุชุฏููู ุงูููุณ",
      "something you let yourself have even though it may be bad for you":
        "ุดูุก ุชุณูุญ ูููุณู ุจู ุฑุบู ุฃูู ูุฏ ูููู ุถุงุฑุงู",

      Substitute: "ุจุฏูู",
      "something that is used in place of another thing":
        "ุดูุก ููุณุชุฎุฏู ููุงู ุดูุก ุขุฎุฑ",

      Delectable: "ูุฐูุฐุ ุดูู",
      delicious: "ูุฐูุฐ",

      // Exercise 5 - Personal vocabulary matching
      Residence: "ุฅูุงูุฉุ ููุฒู",
      "place where someone lives": "ููุงู ูุนูุด ููู ุดุฎุต ูุง",

      Bond: "ุฑุงุจุทุฉุ ุนูุงูุฉ",
      "connection between two living things": "ุตูุฉ ุจูู ูุงุฆููู ุญููู",

      Duration: "ูุฏุฉุ ูุชุฑุฉ ุฒูููุฉ",
      "length of time": "ุทูู ุงูููุช",

      Abstract: "ูุฌุฑุฏุ ูุธุฑู",
      "relating to ideas or feelings": "ูุชุนูู ุจุงูุฃููุงุฑ ุฃู ุงููุดุงุนุฑ",

      Pampered: "ูุฏูู",
      indulged: "ูุฏูู ุฃู ููุชู ุจู ุจุฅูุฑุงุท",

      Adapted: "ุชุฃูููุ ุชููู",
      "adjusted to something new": "ุชููู ูุน ุดูุก ุฌุฏูุฏ",

      // Phrases set 3
      "Hang in there": "ุงุตุจุฑุ ูุง ุชุณุชุณูู",
      "don't give up!": "ูุง ุชุณุชุณูู!",

      "24/7": "ุนูู ูุฏุงุฑ ุงูุณุงุนุฉ",
      "all day and night, non-stop (24 hours a day/7 days a week)":
        "ุทูุงู ุงูููุงุฑ ูุงููููุ ุจูุง ุชููู (24 ุณุงุนุฉ ูู ุงูููู/7 ุฃูุงู ูู ุงูุฃุณุจูุน)",

      "Get to the point": "ุงุฏุฎู ูู ุงูููุถูุน",
      "be direct": "ูู ูุจุงุดุฑุงู",

      "Calling the shots": "ูุชุฎุฐ ุงููุฑุงุฑุงุช",
      "in charge and making the decisions": "ูุณุคูู ููุชุฎุฐ ุงููุฑุงุฑุงุช",

      "Back to the drawing board": "ุงูุนูุฏุฉ ููุจุฏุงูุฉ",
      "to have to start a process over again from the beginning":
        "ุงูุงุถุทุฑุงุฑ ูุจุฏุก ุนูููุฉ ูู ุฌุฏูุฏ ูู ุงูุจุฏุงูุฉ",

      // Exercise 6 - Psychology vocabulary matching
      Consciousness: "ูุนู",
      "the state of being awake": "ุญุงูุฉ ุงูููุธุฉ",

      Alert: "ููุธุ ููุชุจู",
      aware: "ูุงุนู",

      Disturbed: "ูููุ ูุถุทุฑุจ",
      worried: "ููู",

      Deliberately: "ุนูุฏุงูุ ูุตุฏุงู",
      "on purpose": "ุนู ูุตุฏ",

      Speculates: "ูุชูููุ ูุฎูู",
      "guesses about": "ูุฎูู ุญูู",

      Domesticated: "ุฃูููุ ููุณุชุฃูุณ",
      tamed: "ููุฑูุถ",

      Aggressive: "ุนุฏูุงูู",
      "unfriendly, hostile": "ุบูุฑ ูุฏูุฏุ ุนุฏุงุฆู",

      Compassion: "ุดููุฉุ ุฑุญูุฉ",
      "sympathy and concern": "ุชุนุงุทู ูุงูุชูุงู",

      // Exercise 7 - Fill in the blanks with context
      Responsible: "ูุณุคูู",
      "who is responsible for cleaning up this mess?":
        "ูู ุงููุณุคูู ุนู ุชูุธูู ูุฐู ุงูููุถูุ",

      Vanish: "ุชุฎุชูู",
      "my mother's cookies always vanish moments after she takes them out of the oven":
        "ูุนู ุฃูู ูุฎุชูู ุฏุงุฆูุงู ุจุนุฏ ูุญุธุงุช ูู ุฅุฎุฑุงุฌู ูู ุงููุฑู",

      Motivate: "ูุญูุฒ",
      "the beautiful weather helped motivate me to go outside and get some exercise":
        "ุงูุทูุณ ุงูุฌููู ุณุงุนุฏ ูู ุชุญููุฒู ููุฎุฑูุฌ ูููุงุฑุณุฉ ุงูุฑูุงุถุฉ",

      Morally: "ุฃุฎูุงููุงู",
      "people should feel that it's morally wrong to buy stolen goods":
        "ูุฌุจ ุฃู ูุดุนุฑ ุงููุงุณ ุฃูู ูู ุงูุฎุทุฃ ุฃุฎูุงููุงู ุดุฑุงุก ุงูุจุถุงุฆุน ุงููุณุฑููุฉ",

      Dread: "ุฃุฎุดูุ ุฃุฑูุจ",
      "I dread taking final exams next week":
        "ุฃุฎุดู ูู ุงูุชุญุงูุงุช ููุงูุฉ ุงููุตู ุงูุฃุณุจูุน ุงููุงุฏู",

      Tempted: "ููุบุฑูุ ููุฌุฑุจ",
      "I was tempted to watch the film on TV, but I made myself study instead":
        "ููุช ููุบุฑู ููุดุงูุฏุฉ ุงููููู ุนูู ุงูุชููุงุฒุ ููููู ุฃุฌุจุฑุช ููุณู ุนูู ุงูุฏุฑุงุณุฉ ุจุฏูุงู ูู ุฐูู",

      // Phrases set 4
      Rotten: "ูุงุณุฏุ ุณูุก",
      bad: "ุณูุก",

      "I wouldn't put it past him": "ูุง ุฃุณุชุจุนุฏ ููู ุฐูู",
      "I believe he would do that": "ุฃุนุชูุฏ ุฃูู ุณููุนู ุฐูู",

      "Blow the whistle on": "ููุถุญุ ููุดู",
      "to reveal and put a stop to wrongdoing": "ููุดู ูููู ุงูุฃุนูุงู ุงูุฎุงุทุฆุฉ",

      Call: "ูุฑุงุฑ",
      decision: "ูุฑุงุฑ",

      // Exercise 8 - Medical/genetic vocabulary matching
      Genetic: "ูุฑุงุซู",
      "related to the part of a cell that contains your parents' characteristics":
        "ูุชุนูู ุจุฌุฒุก ุงูุฎููุฉ ุงูุฐู ูุญุชูู ุนูู ุฎุตุงุฆุต ูุงูุฏูู",

      Treatable: "ูุงุจู ููุนูุงุฌ",
      "capable of being cured": "ูุงุจู ููุดูุงุก",

      Diagnosis: "ุชุดุฎูุต",
      "identification of the cause of a problem": "ุชุญุฏูุฏ ุณุจุจ ุงููุดููุฉ",

      Undergo: "ูุฎุถุน ููุ ูุชุนุฑุถ ูู",
      experience: "ูุฎูุถ ุชุฌุฑุจุฉ",

      Inherited: "ููุฑูุซ",
      "received from a parent or ancestor": "ููุณุชูู ูู ุฃุญุฏ ุงููุงูุฏูู ุฃู ุงูุฃุฌุฏุงุฏ",

      Preventative: "ููุงุฆู",
      "done in order to avoid": "ูููุนู ูุชุฌูุจ ุดูุก ูุง",

      Controversial: "ูุซูุฑ ููุฌุฏู",
      "causing disagreement": "ูุณุจุจ ุฎูุงูุงู",

      Potential: "ูุญุชููุ ุฅููุงููุฉ",
      "the possibility of being or doing something":
        "ุฅููุงููุฉ ุฃู ุชููู ุฃู ุชูุนู ุดูุฆุงู ูุง",
    };

    function speak(button) {
      window.speechSynthesis.cancel();

      let text = button.previousElementSibling.innerText;
      let speech = new SpeechSynthesisUtterance(text);
      speech.lang = "en-US";
      speech.rate = 1;
      speech.pitch = 1;

      window.speechSynthesis.speak(speech);
    }

    function translation(word) {
      const translation = wordsTranslation[word] || "ุงูุชุฑุฌูุฉ ุบูุฑ ูุชููุฑุฉ";

      Swal.fire({
        html: `<p><strong>ุงููููุฉ:</strong> ${word}</p><p class="mb-0"><strong>ุงูุชุฑุฌูุฉ:</strong> ${translation}</p>`,
        confirmButtonText: "ุฅุบูุงู",
        confirmButtonColor: "#0d6efd",
        customClass: {
          popup: "text-light bg-dark border rounded ",
          title: "fw-bold",
          confirmButton: "btn btn-secondary",
        },
      });
    }

    function populateWordsTable() {
      const tableBody = document.getElementById("wordsTableBody");
      tableBody.innerHTML = "";

      for (const [word, meaning] of Object.entries(englishWords)) {
        const row = document.createElement("tr");
        row.innerHTML = `
              <td><span class="word">${word}</span> <button class="btn btn-sm" onclick="speak(this)">๐</button> <button class="btn btn-sm" onclick="translation(this.previousElementSibling.previousElementSibling.innerHTML)">๐</button></td>
              <td><span class="word">${meaning}</span> <button class="btn btn-sm" onclick="speak(this)">๐</button> <button class="btn btn-sm" onclick="translation(this.previousElementSibling.previousElementSibling.innerHTML)">๐</button></td>
            `;
        tableBody.appendChild(row);
      }
    }

    function speakCurrentWord() {
      window.speechSynthesis.cancel();

      if (currentQuestionIndex < quizWords.length) {
        const text = quizWords[currentQuestionIndex][0];
        const speech = new SpeechSynthesisUtterance(text);
        speech.lang = "en-US";
        speech.rate = 1;
        speech.pitch = 1;

        window.speechSynthesis.speak(speech);
      }
    }

    document
      .getElementById("wordModal")
      .addEventListener("show.bs.modal", populateWordsTable);

    document
      .getElementById("wordsQuizModal")
      .addEventListener("show.bs.modal", initializeWordQuiz);

    function initializeWordQuiz() {
      currentQuestionIndex = 0;
      score = 0;
      wrongAnswers = [];

      quizWords = Object.entries(englishWords);
      quizWords = shuffleWordArray(quizWords);

      document.getElementById("totalQuestions").textContent = quizWords.length;
      document.getElementById("questionCounter").textContent = "1";

      document.getElementById("resultsContainer").style.display = "none";
      document.getElementById("quizContainer").style.display = "block";

      displayWordQuestion();
    }

    function displayWordQuestion() {
      if (currentQuestionIndex < quizWords.length) {
        const currentWord = quizWords[currentQuestionIndex][0];
        const correctMeaning = quizWords[currentQuestionIndex][1];

        document.getElementById("currentWord").textContent = currentWord;
        document.getElementById("questionCounter").textContent = (
          currentQuestionIndex + 1
        ).toString();

        const options = generateWordOptions(correctMeaning);

        const optionsContainer = document.getElementById("options");
        optionsContainer.innerHTML = "";

        options.forEach((option, index) => {
          const button = document.createElement("button");
          button.className = "btn btn-outline-light";
          button.textContent = option;
          button.onclick = () => checkWordAnswer(option, correctMeaning);
          optionsContainer.appendChild(button);
        });
      } else {
        showWordResults();
      }
    }

    function generateWordOptions(correctMeaning) {
      const wrongOptions = getRandomWrongMeanings(correctMeaning, 3);

      const allOptions = [...wrongOptions, correctMeaning];

      return shuffleWordArray(allOptions);
    }

    function getRandomWrongMeanings(correctMeaning, count) {
      const allMeanings = Object.values(englishWords).filter(
        meaning => meaning !== correctMeaning
      );

      return shuffleWordArray(allMeanings).slice(0, count);
    }

    function checkWordAnswer(selectedOption, correctMeaning) {
      if (selectedOption === correctMeaning) {
        score++;
      } else {
        wrongAnswers.push({
          word: quizWords[currentQuestionIndex][0],
          correctMeaning: correctMeaning,
        });
      }

      currentQuestionIndex++;

      setTimeout(() => {
        displayWordQuestion();
      }, 500);
    }

    function showWordResults() {
      document.getElementById("quizContainer").style.display = "none";
      document.getElementById("resultsContainer").style.display = "block";

      const totalQuestions = quizWords.length;
      const correctAnswers = score;
      const wrongAnswersCount = wrongAnswers.length;
      const finalScorePercent = Math.round((score / totalQuestions) * 100);

      document.getElementById("finalTotalQuestions").textContent =
        totalQuestions;
      document.getElementById("finalCorrectAnswers").textContent =
        correctAnswers;
      document.getElementById("finalWrongAnswers").textContent =
        wrongAnswersCount;
      document.getElementById(
        "finalScore"
      ).textContent = `${correctAnswers}/${totalQuestions} (${finalScorePercent}%)`;

      const wrongAnswersList = document.getElementById("wrongAnswersList");
      wrongAnswersList.innerHTML = "";

      if (wrongAnswers.length > 0) {
        wrongAnswers.forEach(wrongAnswer => {
          const listItem = document.createElement("li");
          listItem.className = "list-group-item";
          listItem.innerHTML = `<strong>${wrongAnswer.word}</strong>: ${wrongAnswer.correctMeaning}`;
          wrongAnswersList.appendChild(listItem);
        });
      } else {
        wrongAnswersList.innerHTML =
          '<li class="list-group-item">ูุง ุชูุฌุฏ ุฃุฎุทุงุก. ุฃุญุณูุช!</li>';
      }
    }

    function restartWordQuiz() {
      initializeWordQuiz();
    }

    function shuffleWordArray(array) {
      const newArray = [...array];
      for (let i = newArray.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
      }
      return newArray;
    }
  </script>
</html>
